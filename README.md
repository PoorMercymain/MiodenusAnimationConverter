# MiodenusAnimationConverter

*MiodenusAnimationConverter* - это консольное приложение, входящее в состав *Miodenus Project*, отвечающее за преобразование входных данных (см. ниже) в итоговый видеофайл, содержащий анимацию сборки.

## Входные данные

На вход данное приложение принимает файл, описывающий анимацию сборки (см. ниже).

## Запуск из консоли
### Таблица аргументов

| Обязательный аргумент | Ключ | Значение | Примечание |
| :---: | :---: | :---: | --- |
| Да | `-a` `--animation` | Путь до файла, описывающего анимацию сборки | Путь лучше заключать в двойные `"` кавычки. |
| Нет | `-q` `--quiet` | Отсутствует | В данном режиме приложение не будет выводить сообщения (предупреждения, ошибки...) в консоль. Вывод информации в журнал не будет остановлен. |
| Нет | `-v` `--view` | Номер кадра, который будет загружен для просмотра `*` | Будет запущено графическое окно (размер и другие параметры берутся из файла, описывающего анимацию сборки) в котором будет преставлено состояние анимации (сцена, положение камер...) на момент указанного кадра. При помощи определенных комбинаций клавиш (см. ниже) пользователь сможет осмотреть сцену. Если значение аргумента равно `0` — будет показана вся анимация. В данном режиме приложение не будет производить запись анимации. Диапазон допустимых значений: от `0` до `числа кадров в итоговом видео сборки`. |
| Нет | `-f` `--frame` | Номер кадра, который требуется получить в виде файла изображения `*` | В папке `Screenshots` появится файл изображения указанного кадра. Наименование файла будет иметь следующий вид: `<номер-кадра>_<дата>.png`, где `<дата>` имеет формат `ГГГГ_ММ_ДД_чч_мм_сс`. В случае если файл с таким именем уже существует — он будет перезаписан. В данном режиме приложение не будет производить запись анимации. Диапазон допустимых значений: от `1` до `числа кадров в итоговом видео сборки`. |
| Нет | `--help` | Отсутствует | В консоль будет выведена подробная справка о работе программы, после чего приложение завершит свою работу. |
| Нет | `--version` | Отсутствует | В консоль будет выведена информация о версии установленной программы, после чего приложение завершит свою работу. |

`*` — *Аргументы `--view` и `--frame` не могут применяться одновременно!*

### Пример запуска из консоли

Команда, представленная ниже, создаст итоговый видеофайл сборки, используя анимационный файл *animation.maf*. Приложение не будет выводить какие-либо сообщения в консоль.

`$ ./MiodenusAnimationConverter --animation "path/to/animation.maf" --quiet`

## Анимационный файл

Ниже представлен пример содержимого анимационного файла.

```json
{
    "animationInfo": {
        "type": "maf",
        "version": 1.0,
        "animationName": "Anim1",
        "videoName": "Animation1.avi",
        "timeLength": 3600,
        "fps": 30
    },
    "models": [
    {
        "id": 0,
        "name": "model1",
        "filename": "model_1.stl",
        "md5": "1BC29B36F623BA82AAF6724FD3B16718",
        "transform": {
            "translation": [0.0, 0.0, 0.0],
            "rotation": {
                "angle": 5.0,
                "vector": [0.0, 1.0, 2.0]
            },
            "scale": 1.0
        }
    },
    {
        "id": 1,
        "name": "model2",
        "filename": "model_2.stl",
        "md5": "1BC29B36FAAF6724FD3B16718623BA82",
        "transform": {
            "translation": [0.0, 20.0, 0.0],
            "rotation": {
                "angle": 15.0,
                "vector": [3.0, 1.0, 0.0]
            },
            "scale": 1.02
        }
    }
    ],
    "actions": [
        {
            "id": 0,
            "name": "rotation of model1",
            "startTime": 10,
            "timeLength": 3000,
            "useInterpolation": true,
            "values": [
                {
                    "time": 0,
                    "rotation": {
                        "angle": 5.0,
                        "vector": [0.0, 1.0, 2.0]
                    }
                },
                {
                    "time": 1500,
                    "rotation": {
                        "angle": 35.0,
                        "vector": [0.0, 1.0, 2.0]
                    }
                },
                {
                    "time": 3000,
                    "rotation": {
                        "angle": 95.0,
                        "vector": [0.0, 1.0, 2.0]
                    }
                }
            ]
        }
    ],
    "bindings": [
        {
            "modelId": 0,
            "actionId": 0
        },
        {
            "modelId": 1,
            "actionId": 0
        }
    ],
    "animationInfo": {
        "type": "maf",
        "version": 1.0,
        "animationName": "Anim1",
        "videoName": "Animation1.avi",
        "timeLength": 3600,
        "fps": 30
    }
}
```
